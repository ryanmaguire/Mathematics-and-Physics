\documentclass[crop=false,class=article,oneside]{standalone}
%----------------------------Preamble-------------------------------%
\input{../../../../preamble.tex}
%--------------------------Main Document----------------------------%
\begin{document}
    \ifx\ifphysicscourseselectromagnetismI\undefined
        \section*{Miscellaneous Materials}
        \setcounter{section}{1}
    \fi
    \subsection{Ryan's Progress Report}
        \begin{enumerate}[leftmargin=55pt]
            \item[2017/07/17] Found errors in the equations
                              for occultations of Titan's atmosphere
                              in the User's Guide.
            \item[2017/07/19] Derived the geometry of an occultation
                              Observation of Titan's Atmosphere.
            \item[2017/07/19] Worked with Jolene and Glenn
                              to create Cassini's trajectory.
            \item[2017/07/19] Continued reading through the User's
                              Guide and taking detailed notes
                              for later use.
            \item[2017/07/21] Read through Marouf 1982 to better
                              understand the geometry.
                              Doubtful of certain claims.
            \item[2017/07/21] Read through Marouf 1986 to learn more
                              about diffraction correction.
            \item[2017/07/21] Finished reading User's Guide.
            \item[2017/07/24] Found error in Marouf 1982. It claims
                              Earth should lie in $xz$ plane,
                              but it should not.
            \item[2017/07/24] Learned more about NAIF.
            \item[2017/07/24] Used Glenn's Ripcalc routine to find the
                              ring radius vs. time for Voyager I.
            \item[2017/07/24] Worked on understanding the
                              geometry of MTR86.
            \item[2017/07/25] Installed Python 3.5.
                              Spiceypy works on Python,
                              Canopy, and Jupyter.
            \item[2017/07/25] Plotted Cassini's trajectory.
            \item[2017/07/25] Was able to use CSPICE on MATLAB.
            \item[2017/07/25] Found several parts of Marouf's Table 1
                              using the rip\_calc.pro routine.
            \item[2017/07/27] Went through more NAIF tutorials.
            \item[2017/07/27] Began work on diffraction reconstruction.
            \item[2017/07/27] Made most of table 1 from Marouf 1986.
            \item[2017/07/28] Continued working on Marouf 1986.
                              Tried recreating figure 4.
            \item[2017/07/31] Began working with SPK files,
                              in particular trying
                              to reproduce Marouf Table 1.
            \item[2017/07/31] Got stuck with some of the details
                              of using the
                              kernels. Will figure out tomorrow.
            \item[2017/08/02] Learned to use ripcalc.
            \item[2017/08/02] Learned how to implement the SPICE Toolkit
                              for IDL computations.
            \item[2017/08/02] Made my own ripcalc routine.
            \item[2017/08/02] Ran ripcalc routine with different
                              aberration corrections (CN, LT, LT+S, and NONE).
            \item[2017/08/02] After some tweaking, my routine
                              agrees with the
                              Rev-7E results to within a few meters.
            \item[2017/08/04] Changed ripcalc. Voyager results
                              agree with rgf\_MTR86\_table1.pro to a
                              few centimeters.
            \item[2017/08/04] Began working on recreating
                              figures $4$ and $5$.
            \item[2017/08/04] Updated my ripcalc to create all of table 1,
                              similar to rgf\_MTR86\_table1.pro.
            \item[2017/08/04] Successfully created Table 1 of Marouf. 
            \item[2017/08/04] Successfully derived the equation of $\psi$
                              in MTR86.
            \item[2017/08/04] Worked on reproducing figures $5$ and $4$.
                              Expect to have this completed early next week.
            \item[2017/08/04] Began going over van de Huulst for
                              the derivation
                              of some basic equations in Marouf.
            \item[2017/08/04] Learned to use the NAIF Toolkit effectively
                              and used in code.
            \item[2017/08/08] Reinstalled Mathematica.
            \item[2017/08/08] Installed Microsoft Word from the
                              Wellesley website.
            \item[2017/08/08] Worked on Figure 5. Recreated
                              $\Re\big[T(\rho)\big]$ in Mathematica
                              using a ``hat'' impulse profile.
            \item[2017/08/08] Successfully made figure $5$. 
            \item[2017/08/08] Made very rough plots of $T(\rho)$ for the
                              above impulse profile using quadratic
                              approximation.
            \item[2017/08/10] Read through Elliot (1984).
            \item[2017/08/10] Worked on diffraction correction code.
            \item[2017/08/10] Updated Cassini 2017 TeX document.
            \item[2017/08/11] Worked on figure 4 of Marouf et al. 1986.
            \item[2017/08/11] Read Chylek's paper to understand the theory behind Fresnel diffraction.
            \item[2017/08/11] Learned about Hanning and Hamming windows.
            \item[2017/08/11] Learned about the limitations
                              of various windows.
            \item[2017/08/11] Learned about Chebyshev and
                              Kaiser-Bessel windows.
            \item[2017/08/11] Read Characteristics of
                              Different Smoothing Windows
            \item[2017/08/11] Read through Understanding FFTs
                              and Windowing
            \item[2017/08/11] Sucsessfully reproduced figure 4
            \item[2017/08/11] Made Figure 5 from MTR86.
            \item[2017/08/11] Made figure 4 from MTR86.
            \item[2017/08/11] Made Table 3 from MTR86.
            \item[2017/08/11] Learned about windowing/taper functions.
            \item[2017/08/11] Began diffraction correction code.
            \item[2017/08/11] Read Chylek.
            \item[2017/08/14] Added notes to the recreating
                              of figure 4.
            \item[2017/08/14] Tried rsyncing, but it took over 5 hours.
            \item[2017/08/14] Made flow chart with Glenn and Jolene.
            \item[2017/08/14] Professor French directly rsynced. All set now.
            \item[2017/08/14] Worked with the Kaiser-Bessel window and
                              learned about its properties.
            \item[2017/08/16] Went through and proved
                              Shannon's Sampling Theorem.
            \item[2017/08/16] Studied the Fourier Transform
                              and its uses.
            \item[2017/08/16] Read Introduction to Matched Filters.
            \item[2017/08/17] Learned about the IDL routines used to
                              perform diffraction correction.
            \item[2017/08/17] Looked more into the Kaiser-Bessel windows,
                              and what happens as $\alpha$ varies.
            \item[2017/08/18] Fixed old hard drive. Data is safe.
            \item[2017/08/18] Ran newest version of
                              rjm\_diffraction\_correction.pro
                              and it works.
            \item[2017/08/18] Tested various save files:
            \begin{itemize}
                \item input\_rev7E\_avg\_iq\_16khz: Bad reconstruction.
                      Crazy phase. The power reconstruction was squashed
                      down to zero.
                \item input\_rev7E\_avg\_iq\_100m: Bad reconstruction.
                      Jolene's save file that shifts the geometry by 100
                      meters in an attempt to fix offset. Offset comes
                      from phase, not geometry. This is also an old file.
                \item input\_rev7E\_avg\_iq\_halfbin: Bad reconstruction.
                      A different attempt to fix the offset. Old file.
                \item input\_rev7E\_avg\_iq\_predicts: Good reconstruction.
                      Uses reconstructed frequency. Uses kernels from the
                      trajectory of the spacecraft after the event. Still
                      contains slope in the phase, which results in offset.
                \item input\_rev7E\_avg\_iq - Good reconstruction.
                      Gets sky frequency from polynomials in RSR file.
                      Runs same predicts program as reconstructed frequency.
                      Still contains slope in the phase,
                      which results in offset.
                \item input\_rev123\_avg\_iq\_1khz: Crazy phase.
                      Geometry is off by about 10 kilometers or so.
                      Other than that, reconstruction is decent.
                \item input\_rev7E\_ourFFTpower\_16NperFFT\_more\_pts:
                      Poor resolution. The slope is more gradual than
                      Essam's. Phase is much better and the slope is
                      removed (No more radial offset). 
                \item input\_rev7E\_schinder\_16NperFFT\_more\_pts:
                      Similar to previous input. Wrong $\phi$.
                \item input\_rev7E\_schinder\_32NperFFT\_more\_pts:
                      Same as before. Wrong $\phi$.
                \item input\_rev7E\_schinder\_16NperFFT\_pad20\_more\_pts:
                      Same as before. Wrong $\phi$.
            \end{itemize}
            \item[2017/08/18] Re-ran diffraction correction 
                              with the correct phi values:
            \begin{itemize}
                \item input\_rev7E\_ourFFTpower\_16NperFFT\_more\_pts:
                      Very good match. The phase has been fixed.
                \item input\_rev7E\_schinder\_16NperFFT\_more\_pts:
                      Nearly identical to the previous one. Good fit.
                      Slope in phase mostly removed. Offset gone.
                \item input\_rev7E\_schinder\_16NperFFT\_pad20\_more\_pts:
                      Good fit.
                \item input\_rev7E\_schinder\_32NperFFT\_more\_pts:
                      Better fit than fit with padding.
            \end{itemize}
        \end{enumerate}
        To Do:
        \begin{enumerate}
            \item Re-derive the equations involved in the geometry of an atmospheric occultation.
            \item Finish reading the User's Guide and finish the notes.
            \item Learn about Fresnel Diffraction and go through old notes on Fourier Optics.
            \item If time permits, read Van de Huulst and Chandrasakhr. Both are crucial to the theory of occultations.
            \item Next week, start recreating figures from Marouf.
            \item Learn the Mie Theory (Read Jackson and Whittet).
            \item Learn about the problem of scattering off a random ensemble of points. Read the App. Opt. articles.
            \item Recreate the figures and tables from Marouf 1982/1986. Justify various equations in both of these.
            \item Start on the diffraction reconstruction for Rev-7E.
            \item Finish recreating the remaining parts of Marouf 1986.
            \item End to end pipeline in Python for Rev007 E, X43.
            \begin{itemize}
                \begin{multicols}{4}
                    \item *.cal
                    \item *.geo
                    \item *.obs
                    \item *.tau
                \end{multicols}
            \end{itemize}
            \item Learn about the $\alpha$ of a plot.
            \item Make interactive plot for rev007 E.
            \item Think about user interactive parts.
            \begin{itemize}
                \item Geometry
                \begin{itemize}
                    \item Mindfully choose the RSR you want. Radial coverage, opening angle, etc.
                \end{itemize}
                \item Phase and power retreival
                \begin{itemize}
                    \item Picking start and end SPM
                    \item Choosing nots
                    \item Choosing order of residual frequency fit
                \end{itemize}
                \item Diffraction reconstruction
                \begin{itemize}
                    \item Choose resolution, window type, and range.
                \end{itemize}
                \item Look at Essam's new directory structure.
                \item Look at Essam's diffraction profiles. Try to recreate his corrected profiles using the diffraction reconstruction code.
            \end{itemize}
            \item Document why the FFT suceeded and why the
                  integral failed for certain revs where the cubic was
                  non negligible. Note that the quartic term was not
                  the problem, and that undersampling is not the
                  problem either. It is the fact that the FFT for
                  some reason swaps the sign of odd terms. Also not
                  that it is not a window size or a B problem, but
                  rather only dependent on when psi has large odd
                  polynomial terms.
            \item Document in detail the normalization factor that
                  is used for the window width. Include approximate
                  normalization factors that assume psi is equal to
                  the fresnel approximation and show why the factor
                  is need. That is, for large resolutions
                  (Small windows) you'd reconstructions scaled
                  to near zero.
            \item Process Rev007 I and E at all bands. Document results.
            \item Document the ideal, or optimal, resolution to compare
                  with Essam based on comparisons with $L_{1}$,
                  $L_{2}$, and $L_{\infty}$ for various revs, including
                  old high resolution data sets from various idl .sav
                  files. Include documentation on the effect of using
                  different windows for these comparisons. Show that
                  the best match uses a window (KBMD20) that is not
                  mentioned in MTR86.
            \item Develop an understanding of diffraction
                  reconstruction (Including noise
                  and computational limits).
            \item Derive key results from MTR86 that are not
                  derived in the paper.
            \item Justify mathematically the choices of signs, etc.,
                  in the FFTs of the convolution functions, etc.
            \item Reproduce tables and sample results in MTR86
                  based on Voyager data.
            \item Develop set of standard plots, tables, results
                  for each event, to be included in PDS archive.
            \item Test results using RSS Data Users Guide and
                  comparison of our diffraction results with
                  existing online RSS results.
            \item Look into FFTW.
            \item Figure out threshold optical depth.
            \item Learn how to use the NAIF toolkit and learn
                  how to read and plot Cassini trajectory files.
            \item Plot the geometry of the Voyager RSS encounter.
            \item Use the NAIF toolkit to plot the ring
                  intercept point (rip) for Voyager and Cassini.
            \item Use Dick Simpson's Fortran code on Rev 282.
            \item Learn to use NAIF, make plots for Rev007E.
            \item Learn to use Ripcalc. Learn to use AXIS (IDL).
            \item Learn rgf\_read\_rsr\_hdr.pro. 
                  This routine reads and RSR header and returns
                  the first SFDU in a structure.
            \item Reproduce RSS User Guide figures.
            \item Learn cubic and quadratic splines. Learn knots.
            \item Learn how to read RSR files and calc sky freq.
            \item Learn to read and write PDS3 files.
            \item Look into Rev123. Try to find F ring.
        \end{enumerate}

\subsubsection{\footnotesize RE: Source of Computation Time}
Commenting out the entire FFT section did almost nothing to time, commenting out the computation for psi (And using a constant parabola function) made the code finish in a minute (It takes about 17 hours usually). An exact example is: Parabola Computation of C-Ring Ripples (Using pure FFT's): 1.65 seconds. Exact Psi Computation of C-Ring Ripples (Using pure FFT's): 106.4 seconds. So, psi is the culprit. I have a few ideas to fix this that I'll try tonight. -Ryan\\
Great! You might try various interpol() calls with /QUADRATIC and /SPLINE as options, with various spacings, to see what works bets. Also, be sure you are not duplicating the calculations of sin() or cos() for the same argument. -Dick\\
Wouldn't this be a 3-D interpol? We have psi = psi(rho,rho0), and wish to calculate at n points in the rho0 domain, and then interpolate over the rest. Is there such a 3-D interpol routine? -Ryan\\
I think you just need to calculate psi\_vals in the for n=0L,nw-2L loop at a coarser interval and then run interpol() on psi\_vals[] - it is a one-dimensional function for a given phi0. You should be able to cut down execution time by quite a bit if nw=1000 and you evaluate only at, say 100 or 200 points (including the endpoints, so you aren't extrapolating) and then interpolate. If necessary, you could even do a dynamic test to confirm that your interpolation is done at a fine enough interval by comparing the interpolation to an exact calculation at various points. -Dick\\
One thought I had is that currently psi\_vals is calculated per point. The nth iteration of psivals has a closed form solution, and I still have what that solution is for n=4. Instead running a for loop of size nw and then a while loop, we could see if the 4th iteration is good enough and then just hardline that solution into the code. It would speed things up by a tremendous amount. -Ryan\\


    
Hi, all, esp. Ryan - I'm puzzled by the post-diffraction correction residual phase for the Titan ringlet in the plot now in the interim report. For the Huygens ringlet, the phase matches Essam's quite well, but for the Titan ringlet the 1 km results are quite poor, with far more structure and larger amplitude than Essam's. A clue about what is going on might be the asymmetry of the scatter in the phase, which is mostly positive and only slightly negative, which I would not expect. On the other hand, the POWER calculation looks good - tau agrees with Essam's. So, that means that $I^{2}+Q^{2}$ is OK but $atan(Q,I)$ is not. Ryan, would you first confirm that v4.1 and v5 give the same results for residual phase, and double-check your calculation of residual phase for Titan compared to Huygens ringlets? Did you use exactly the same code and input files for the two cases? I think there must be some difference, other than the Titan ringlet being more opaque than the Huygens ringlet. -Dick
I found the error. v5 and v4.1 produce near identical phases. The problem is that the 50m file was used, for the sake of being able to produce the 100m plots. If the v2 250m spacing file is used, you get a very good match. -Ryan

\end{document}