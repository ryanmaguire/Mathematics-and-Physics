%---------------------------Packages----------------------------%
\usepackage{geometry}
\geometry{b5paper, margin=1.0in}
\usepackage[T1]{fontenc}
\usepackage{graphicx, float}            % Graphics/Images.
\usepackage{natbib}                     % For bibliographies.
\bibliographystyle{agsm}                % Bibliography style.
\usepackage[french, english]{babel}     % Language typesetting.
\usepackage[dvipsnames]{xcolor}         % Color names.
\usepackage{listings, lstlinebgrd}      % Verbatim-Like Tools.
\usepackage{mathtools, esint, mathrsfs} % amsmath and integrals.
\usepackage{amsthm, amsfonts}           % Fonts and theorems.
\usepackage{tabularx}
\usepackage{tcolorbox}                  % Frames around theorems.
\usepackage{upgreek}                    % Non-Italic Greek.
\usepackage{paracol}                    % Two-column styling.
\usepackage{wrapfig}                    % Wrap text around figure.
\usepackage{fmtcount, etoolbox}         % For the \book{} command.
\usepackage[newparttoc]{titlesec}       % Formatting chapter, etc.
\usepackage{titletoc}                   % Allows \book in toc.
\usepackage[nottoc]{tocbibind}          % Bibliography in toc.
\usepackage[titles]{tocloft}            % ToC formatting.
\usepackage{multicol, enumitem}         % Multi-column/enumerate.
\usepackage{import}                     % Import external files.
\usepackage{pgfplots, tikz}             % Drawing/graphing tools.
\usetikzlibrary{
    calc,                   % Calculating right angles and more.
    angles,                 % Drawing angles within triangles.
    arrows.meta,            % Latex and Stealth arrows.
    quotes,                 % Adding labels to angles.
    positioning,            % Relative positioning of nodes.
    decorations.markings,   % Adding arrows in the middle of a line.
    patterns,
    arrows,
    shapes,
    shapes.geometric,
    cd,
    hobby,
    babel
}                                       % Libraries for tikz.
\pgfplotsset{compat=1.9}                % Version of pgfplots.
\usepackage[font=scriptsize,
            labelformat=simple,
            labelsep=colon]{subcaption} % Subfigure captions.
\usepackage[font={scriptsize},
            hypcap=true,
            labelsep=colon]{caption}    % Figure captions.
\usepackage{hyperref}                   % Allows for hyperlinks.
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=Cerulean,
    citecolor=SkyBlue
}                           % Colors for hyperref.
\usepackage[toc,acronym,nogroupskip]{glossaries} % Glossaries and acronyms.
\usepackage[subpreambles=false]{standalone}      % Complileable sub files.

% Various font stuff from kiwi.
% Use this for Times text and Computer Modern math
%\usepackage{times}

% Quite nice
%\usepackage[charter, greekfamily=, greekuppercase=italicized]{mathdesign}
%\usepackage[utopia, greekuppercase=italicized]{mathdesign}    % Math is narrower

% Use this for Times text and math
%\usepackage{newtxtext}
%\usepackage[libertine,cmintegrals]{newtxmath}
%\usepackage{fix-cm}

%\usepackage{txfontsb}
% or
%\usepackage{mathptmx}

%\usepackage[scaled=0.92]{helvet}
%\renewcommand{\rmdefault}{ptm}

%\usepackage{mathpazo}    % add possibly `sc` and `osf` options
%\usepackage{eulervm}

%\usepackage{fourier}
%\renewcommand{\rmdefault}{ptm}
%\usepackage{mathptm}

%\usepackage{fontspec}
%\setmainfont{lmodern}

%\usepackage[varg]{txfonts}
%\usepackage{fouriernc}
%\usepackage{mathpazo}

%\usepackage{bookman}
%\usepackage[scaled]{uarial}
%\usepackage[scaled]{helvet}
%\renewcommand*\familydefault{\sfdefault}
%\usepackage[math]{anttor}

%\newcommand\fgeorgia{\fontfamily{jvn}\selectfont}
%\newcommand\ftimes{\fontfamily{ptm}\selectfont}
%\newcommand\fhelvetica{\fontfamily{phv}\selectfont}
%\newcommand\fcourier{\fontfamily{pcr}\selectfont}
%\newcommand\fbookman{\fontfamily{pbk}\selectfont}
%\newcommand\fnewcentury{\fontfamily{pnc}\selectfont}
%\newcommand\fpalatino{\fontfamily{ppl}\selectfont}
%\newcommand\favantgarde{\fontfamily{pag}\selectfont}
%\newcommand\fnormal{\normalfont}
%\newcommand\fsize[1]{\ifnum#1>0\fontsize{#1}{#1}\selectfont\else\normalsize\fi}
%------------------------Theorem Styles-------------------------%
% Define theorem style for default spacing and normal font.
\newtheoremstyle{normal}
    {\topsep}               % Amount of space above the theorem.
    {\topsep}               % Amount of space below the theorem.
    {}                      % Font used for body of theorem.
    {}                      % Measure of space to indent.
    {\bfseries}             % Font of the header of the theorem.
    {}                      % Punctuation between head and body.
    {.5em}                  % Space after theorem head.
    {}

% Define theorem style for default spacing with italicized font.
\newtheoremstyle{normalit}{\topsep}{\topsep}
                {\itshape}{}{\bfseries}{}{.5em}{}

% Italic header environment.
\newtheoremstyle{thmit}{\topsep}{\topsep}{}{}{\itshape}{}{0.5em}{}

% Define italicized environments.
\theoremstyle{normalit}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem*{theorem*}{Theorem}

% Define environments with italic headers.
\theoremstyle{thmit}
\newtheorem*{solution}{Solution}
\newtheorem*{fsolution}{Solution}

% Define default environments.
\theoremstyle{normal}
\newtheorem{example}{Example}[section]
\newtheorem{definition}{Definition}[section]
\newtheorem{problem}{Problem}[section]
\newtheorem{question}{Question}[section]
\newtheorem{remark}{Remark}[section]
\newtheorem{properties}{Properties}[section]
\newtheorem{notation}{Notation}[section]
\newtheorem{axiom}{Axiom}[section]
\newtheorem*{properties*}{Properties}
\newtheorem*{remark*}{Remark}
\newtheorem*{definition*}{Definition}
\theoremstyle{plain}

% Define framed environment.
\tcbuselibrary{most}
\newtcbtheorem[use counter*=theorem]{ftheorem}{Theorem}%
    {colback=green!5,colframe=green!35!black,
     fonttitle=\bfseries\upshape}{th}

\newtcbtheorem[use counter*=example]{fdefinition}{Definition}%
    {fonttitle=\bfseries\upshape,
     colback=blue!5!white,colframe=blue!75!black}{def}

\newtcbtheorem[use counter*=example]{fexample}{Example}%
    {fonttitle=\bfseries\upshape,
     colback=red!5!white,colframe=red!75!black}{ex}

\newtcbtheorem[use counter*=notation]{fnotation}{Notation}%
    {fonttitle=\bfseries\upshape,
     colback=SeaGreen!5!white,colframe=SeaGreen!75!black}{ex}

\newtcbtheorem[use counter*=corollary]{fcorollary}{Corollary}%
    {fonttitle=\bfseries\upshape,
     colback=Orchid!5!white,colframe=Orchid!75!black}{ex}

\newenvironment{bproof}{\textit{Proof.}}{\hfill$\square$}
\tcolorboxenvironment{bproof}{blanker,breakable,left=5mm,
                             before skip=10pt,after skip=10pt,
                             borderline west={1mm}{0pt}{red}}
\tcolorboxenvironment{fsolution}
    {enhanced jigsaw,colframe=cyan,interior hidden,breakable}

%--------------------Declared Math Operators--------------------%
\DeclareMathOperator{\Refl}{Refl}           % Reflection operator.
\DeclareMathOperator{\Span}{Span}           % Span of a set of vectors.
\DeclareMathOperator{\Card}{Card}           % Cardinality of set.
\DeclareMathOperator{\Ord}{Ord}             % Ordinal of ordered set.
\DeclareMathOperator{\Tr}{Tr}               % Trace of matrix.
\DeclareMathOperator{\adjoint}{adj}         % Adjoint of matrix.
\DeclareMathOperator{\rk}{rk}               % Rank of operator.
\DeclareMathOperator{\nul}{nul}             % Null space of operator.
\DeclareMathOperator{\sgn}{sgn}             % Sign of a number.
\DeclareMathOperator{\multideg}{mutlideg}   % Multi-Degree (Graphs).
\DeclareMathOperator{\GCD}{GCD}             % Greatest common denominator.
\DeclareMathOperator{\LM}{LM}               % Leading monomial
\DeclareMathOperator{\LC}{LC}               % Leading coefficient.
\DeclareMathOperator{\LT}{LT}               % Leading term.
\DeclareMathOperator{\LCM}{LCM}             % Least common multiple.
\DeclareMathOperator{\Mon}{Mon}             % Monomial.
\DeclareMathOperator{\Spec}{Spec}           % Spectrum.
\DeclareMathOperator{\proj}{proj}           % Projection.
\DeclareMathOperator{\comp}{comp}           % Component.
\DeclareMathOperator{\sinc}{sinc}           % Sinc function.
\DeclareMathOperator{\Ima}{Im}              % Image of operator.
\DeclareMathOperator{\Prin}{Prin}           % Principal value.
\DeclareMathOperator{\Mod}{mod}             % Modulus.
%------------------------New Commands---------------------------%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}
\newcommand*\diff{\mathop{}\!\mathrm{d}}
\newcommand*\Diff[1]{\mathop{}\!\mathrm{d^#1}}
\renewcommand{\mod}{\ \Mod}
\renewcommand*{\glstextformat}[1]{\textcolor{RoyalBlue}{#1}}
\renewcommand{\glsnamefont}[1]{\textbf{#1}}
\renewcommand\labelitemii{$\circ$}
\renewcommand\thesubfigure{\arabic{chapter}.\arabic{figure}}
\renewcommand\thesubfigure{%
    \arabic{chapter}.\arabic{figure}.\arabic{subfigure}}
\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
%------------------------Book Command---------------------------%
\makeatletter
\renewcommand\@pnumwidth{1cm}
\newcounter{book}
\renewcommand\thebook{\@Roman\c@book}
\newcommand\book{%
    \if@openright
        \cleardoublepage
    \else
        \clearpage
    \fi
    \thispagestyle{plain}%
    \if@twocolumn
        \onecolumn
        \@tempswatrue
    \else
        \@tempswafalse
    \fi
    \null\vfil
    \secdef\@book\@sbook
}
\def\@book[#1]#2{%
    \ifnum \c@secnumdepth >-3\relax
        \refstepcounter{book}%
        \addcontentsline{toc}{book}{
            \bookname\ \thebook:\hspace{1em}#1
        }
    \else
        \addcontentsline{toc}{book}{#1}%
    \fi
    \markboth{}{}%
    {\centering
     \interlinepenalty \@M
     \normalfont
     \ifnum \c@secnumdepth >-2\relax
       \huge\bfseries \bookname\nobreakspace\thebook
       \par
       \vskip 20\p@
     \fi
     \Huge \bfseries #2\par}%
    \@endbook}
\def\@sbook#1{%
    {\centering
     \interlinepenalty \@M
     \normalfont
     \Huge \bfseries #1\par}%
    \@endbook}
\def\@endbook{
    \vfil\newpage
        \if@twoside
            \if@openright
                \null
                \thispagestyle{empty}%
                \newpage
            \fi
        \fi
        \if@tempswa
            \twocolumn
        \fi
}
\newcommand*\l@book[2]{%
    \ifnum \c@tocdepth >-2\relax
        \addpenalty{-\@highpenalty}%
        \addvspace{2.25em \@plus\p@}%
        \setlength\@tempdima{3em}%
        \begingroup
            \parindent \z@ \rightskip \@pnumwidth
            \parfillskip -\@pnumwidth
            {
                \leavevmode
                \Large \bfseries #1\hfil \hb@xt@\@pnumwidth{
                    \hss #2
                }
            }
            \par
            \nobreak
            \global\@nobreaktrue
            \everypar{\global\@nobreakfalse\everypar{}}%
        \endgroup
    \fi}
\newcommand\bookname{Book}
\renewcommand{\thebook}{\texorpdfstring{\Numberstring{book}}{book}}
\providecommand*{\toclevel@book}{-2}
\makeatother
\titlecontents{chapter}[0pt]
    {\bfseries}
    {\chaptername\ \thecontentslabel:\quad}
    {}
    {\hfill\contentspage}
\titleformat{\part}[display]
    {\Large\bfseries}
    {\partname\nobreakspace\thepart}
    {0mm}
    {\Huge\bfseries}
    \titlecontents{part}[0pt]
    {\large\bfseries}
    {\partname\ \thecontentslabel: \quad}
    {}
    {\hfill\contentspage}
\newcommand{\MarkRightAngle}[4][.3cm]
    {\coordinate (tempa) at ($(#3)!#1!(#2)$);
     \coordinate (tempb) at ($(#3)!#1!(#4)$);
     \coordinate (tempc) at ($(tempa)!0.5!(tempb)$);%midpoint
     \draw (tempa) -- ($(#3)!2!(tempc)$) -- (tempb);}
%--------------------------LENGTHS------------------------------%
% Spacings for the Table of Contents.
\addtolength{\cftsecnumwidth}{1ex}
\addtolength{\cftsubsecindent}{1ex}
\addtolength{\cftsubsecnumwidth}{1ex}
\addtolength{\cftfignumwidth}{1ex}
\addtolength{\cfttabnumwidth}{1ex}

% Spacing for multi-column and enumerate environments.
\setlength{\multicolsep}{6pt}
\setlist[enumerate]{itemsep=0pt,topsep=3pt}

% Indent and paragraph spacing.
\setlength{\parindent}{0em}
\setlength{\parskip}{0em}